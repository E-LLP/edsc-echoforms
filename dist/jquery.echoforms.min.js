(function(){function x(e,g){return function(){return e.apply(g,arguments)}}function g(e,g){function r(){this.constructor=e}for(var k in g)y.call(g,k)&&(e[k]=g[k]);r.prototype=g.prototype;e.prototype=new r;e.a=g.prototype}var s=[].slice,y={}.hasOwnProperty;(function(e,C,r){var k,m,D,E,t,z,F,G,H,I,A,J,p,K,L,M,N,O,P,Q,B,q,v,R,u,y,S,T,U,V,W;u=function(){var b;b=1<=arguments.length?s.call(arguments,0):[];return"undefined"!==typeof console&&null!==console?"function"===typeof console.warn?console.warn.apply(console,
b):void 0:void 0};q=B=function(){var b;b=1<=arguments.length?s.call(arguments,0):[];return"undefined"!==typeof console&&null!==console?"function"===typeof console.error?console.error.apply(console,b):void 0:void 0};wgxpath.ra(C);v=function(b,a,c){"["===(null!=a?a.charAt(0):void 0)&&(a="self::*"+a);if("true"===a)return!0;if("false"===a)return!1;b=r.evaluate(a,b[0],c,XPathResult.ANY_TYPE,null);switch(b.resultType){case XPathResult.NUMBER_TYPE:return b.numberValue;case XPathResult.STRING_TYPE:return b.stringValue;
case XPathResult.BOOLEAN_TYPE:return b.booleanValue;default:return b.iterateNext()}};R=function(b){var a;if(!b||"string"!==typeof b)return null;a=void 0;try{C.DOMParser?a=(new DOMParser).parseFromString(b,"text/xml"):(a=new ActiveXObject("Microsoft.XMLDOM"),a.async="false",a.loadXML(b))}catch(c){q=c}a&&a.documentElement&&!a.getElementsByTagName("parsererror").length||q("Invalid XML: "+b);return a};k=function(){function b(a){this.message=a}b.prototype.p=function(){return u(""+this.constructor.name+
" must override check")};return b}();F=function(b){function a(c,h){this.pattern=RegExp("^"+c+"$");a.a.constructor.call(this,null!=h?h:"Invalid")}g(a,b);a.prototype.p=function(a){return!a||null!==this.pattern.exec(a)};return a}(k);M=function(b){function a(c,h){this.k=c;a.a.constructor.call(this,null!=h?h:"Invalid")}g(a,b);a.prototype.p=function(a,h,d){return v(h,this.k,d)};return a}(k);K=function(b){function a(c,h){var d,b;null==h&&(h=null);this.type=(d=c.match(/^(?:[^:]+:)?(.*)$/))?d[1]:c;b=function(){switch(this.type){case "double":return"number";
case "long":return"integer between -2^63 and 2^63-1";case "int":return"integer between -2,147,483,648 and 2,147,483,647";case "short":return"integer between -32,768 and 32,767";case "datetime":return"date/time with format MM/DD/YYYYTHH:MM:SS";case "boolean":return"true or false";default:return this.type}}.call(this);d=/^[aeiou]/i.test(b)?"an":"a";a.a.constructor.call(this,null!=h?h:"Value must be "+d+" "+b)}g(a,b);a.$=-Math.pow(2,15);a.X=Math.pow(2,15)-1;a.Y=-Math.pow(2,31);a.V=Math.pow(2,31)-1;a.Z=
-Math.pow(2,63);a.W=Math.pow(2,63)-1;a.prototype.p=function(a){if(!a)return!0;switch(this.type){case "string":return!0;case "anyuri":return!0;case "double":return this.ga(a);case "long":return this.ia(a);case "int":return this.ha(a);case "short":return this.ja(a);case "datetime":return this.fa(a);case "boolean":return this.ea(a);default:return u("Unable to validate type: ",this.type),!0}};a.prototype.w=function(a,h,d){var b;b=Number(d);return!isNaN(b)&&b>=a&&b<=h&&-1===d.indexOf(".")};a.prototype.ga=
function(a){return!isNaN(Number(a))};a.prototype.ia=function(c){return this.w(a.Z,a.W,c)};a.prototype.ha=function(c){return this.w(a.Y,a.V,c)};a.prototype.ja=function(c){return this.w(a.$,a.X,c)};a.prototype.ea=function(a){return"true"===a||"false"===a};a.prototype.fa=function(a){var h,d,b,l,e,g,n;if(!a.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}$/))return!1;a=a.split("T");h=a[0];n=a[1];d=function(){var a,c,b,d;b=h.split("-");d=[];a=0;for(c=b.length;a<c;a++)g=b[a],d.push(parseInt(g,10));return d}();
a=d[1];d=d[2];e=function(){var a,c,h,b;h=n.split(":");b=[];a=0;for(c=h.length;a<c;a++)g=h[a],b.push(parseInt(g,10));return b}();b=e[0];l=e[1];e=e[2];return 1<=a&&12>=a&&1<=d&&31>=d&&24>b&&60>l&&60>e};return a}(k);H=function(b){function a(c,h){this.k=c;null==h&&(h="Required field");a.a.constructor.call(this,h)}g(a,b);a.prototype.p=function(a,h,b){a instanceof Array&&0===a.length&&(a=null);return!!a||!v(h,this.k,b)};return a}(k);Q=0;m=function(){function b(a,c,h,b){var f;this.n=a;this.r=c;this.B=h;
this.t=b;this.P=x(this.P,this);this.A=x(this.A,this);this.e=a.b("ref");this.id=null!=(f=a.b("id"))?f:"echoforms-control-"+Q++;this.H=a.b("relevant");this.S=a.b("required");this.G=a.b("readonly");this.label=a.b("label");b=a.children("help");c=0;for(h=b.length;c<h;c++)a=b[c],e(a).text();this.F();this.c=this.g()}b.prototype.F=function(){var a,c,b,d,f,l,g;this.q=[];this.S&&this.q.push(new H(this.S));l=this.n.children("constraints").children("constraint");g=[];d=0;for(f=l.length;d<f;d++)c=l[d],c=e(c),
a=c.children("alert").text(),b=c.children("pattern"),c=c.children("xpath"),0<b.length&&this.q.push(new F(b.text(),a)),0<c.length?g.push(this.q.push(new M(c.text(),a))):g.push(void 0);return g};b.prototype.j=function(){return null!=this.e?e(this.k(this.e)):this.r};b.prototype.h=function(){if(null!=this.e)return e.trim(this.j().text())};b.prototype.l=function(){return u(""+this.constructor.name+" must override inputValue")};b.prototype.d=function(){return this.U()};b.prototype.U=function(){var a,c;
c=null==this.H||!!this.k(this.H);a=null!=this.G&&!!this.k(this.G);null!=this.H&&this.R(c);null!=this.G&&this.Q(a);var b,d,f,e;d=this.q;e=[];c=0;for(b=d.length;c<b;c++)a=d[c],a.p(null!=(f=this.h())?f:this.l(),this.r,this.t)||e.push(a.message);return this.oa(e)};b.prototype.s=function(){};b.prototype.k=function(a){return v(this.r,a,this.t)};b.prototype.element=function(){return null!=this.c?this.c:this.c=this.g()};b.prototype.ma=function(){return this.h()!==this.l()||!this.e};b.prototype.A=function(){return this.c.ua("echoforms:modelchange")};
b.prototype.R=function(a){var c;if(null!=a){if(a=!!a,a!==this.R()&&(this.c.T("echoforms-irrelevant",!a),this.c.toggle(a),c=this.j(),c.T("echoforms-pruned",!a),""===c.b("class")))return c.na("class")}else return!this.c.ka("echoforms-irrelevant")};b.prototype.Q=function(a){if(null!=a){if(a=!!a,a!==this.Q())return this.c.T("echoforms-readonly ui-state-disabled",a),this.u(a)}else return this.c.ka("echoforms-readonly")};b.prototype.u=function(a){this.f().b("disabled",a);return this.f().b("readonly",a)};
b.prototype.P=function(){if(this.ma())return this.s(),this.A()};b.prototype.N=function(){return null!=this.label?e('<label class="echoforms-control-label" for="'+this.id+'-element">'+this.label+"</label>"):e()};b.prototype.M=function(){var a,c,b,d,f;c=e();f=this.n.children("help");b=0;for(d=f.length;b<d;b++)a=f[b],c=c.add('<label class="echoforms-help" for="'+this.id+'-element">'+e(a).text()+"</label>");return c};b.prototype.ba=function(){return e('<div id="'+this.id+'" class="echoforms-control echoforms-control-'+
this.n[0].nodeName+'"/>')};b.prototype.ca=function(){return e('<div class="echoforms-elements"/>').append(this.m())};b.prototype.da=function(){return e('<div class="echoforms-errors"/>')};b.prototype.oa=function(a){var c,b,d,f;c=e();d=0;for(f=a.length;d<f;d++)b=a[d],q=e('<div class="echoforms-error"/>'),q.text(b),c=c.add(q);return this.c.find(".echoforms-errors").empty().append(c)};b.prototype.m=function(){return e()};b.prototype.g=function(){return this.ba().append(this.N()).append(this.ca()).append(this.M()).append(this.da())};
return b}();p=function(b){function a(c,b,d,f){var e;this.D=(null!=(e=c.b("type"))?e:"string").replace(/^.*:/,"").toLowerCase();a.a.constructor.call(this,c,b,d,f);this.f()}g(a,b);a.prototype.F=function(){a.a.F.call(this);return this.q.push(new K(this.D))};a.prototype.f=function(){return null!=this.K?this.K:this.K=this.c.find(":input")};a.prototype.l=function(){return e.trim(this.f().J())};a.prototype.s=function(){a.a.s.call(this);if(this.e)return this.j().text(this.l())};a.prototype.d=function(){a.a.d.call(this);
if(this.e)return this.f().J(this.h())};return a}(m);t=function(b){function a(){return y=a.a.constructor.apply(this,arguments)}g(a,b);a.i="input";a.prototype.C="text";a.prototype.m=function(){var a;a=e('<input id="'+this.id+'-element" type="'+this.C+'" class="echoforms-element-input echoforms-element-input-'+this.D+'" autocomplete="off">');"datetime"===this.D&&a.b("placeholder","MM/DD/YYYYTHH:MM:SS");return a};return a}(p);k=function(b){function a(){return S=a.a.constructor.apply(this,arguments)}g(a,
b);a.i="input[type$=boolean]";a.prototype.C="checkbox";a.prototype.l=function(){return this.f().la(":checked").toString()};a.prototype.d=function(){a.a.d.call(this);if(this.e)return this.f().b("checked","true"===this.h())};a.prototype.g=function(){var c;c=a.a.g.call(this);c.L("echoforms-control-checkbox");c.children(".echoforms-elements").aa(c.children(".echoforms-control-label"));return c};return a}(t);z=function(b){function a(c,b,d,f){this.v=c.b("value");a.a.constructor.call(this,c,b,d,f)}g(a,b);
a.i="output";a.prototype.f=function(){return e()};a.prototype.h=function(){return this.v?this.k(this.v):a.a.h.call(this)};a.prototype.d=function(){a.a.d.call(this);if(this.e||this.v)return this.c.find(".echoforms-elements > p").text(this.h())};a.prototype.m=function(){return e("<p/>")};return a}(p);L=function(b){function a(){return T=a.a.constructor.apply(this,arguments)}g(a,b);a.i="output[type$=anyURI], output[type$=anyuri]";a.prototype.d=function(){var a;a=this.h();if(this.e||this.v)return this.c.find(".echoforms-elements > a").text(a).b("href",
a)};a.prototype.m=function(){return e('<a href="#" />')};return a}(z);A=function(b){function a(c,b,d,f){var l,g;this.O="true"===c.b("multiple");this.o=c.b("valueElementName");var w,n,k,m;k=c.children("item");m=[];w=0;for(n=k.length;w<n;w++)l=k[w],g=[e(l).b("label"),e(l).b("value")],l=g[0],g=g[1],m.push([null!=l?l:g,g]);this.items=m;a.a.constructor.call(this,c,b,d,f)}g(a,b);a.i="select";a.prototype.h=function(){var c,b,d,f,l;if(null!=this.o&&null!=this.e){f=this.j().children(this.o);l=[];b=0;for(d=
f.length;b<d;b++)c=f[b],l.push(e(c).text());return l}return a.a.h.call(this)};a.prototype.s=function(){var c,b,d,f,l,g,k,n;if(null!=this.o&&null!=this.e){d=this.j().empty();f=d[0].nodeName.split(":").reverse();b=f[1];f=this.o;null!=b&&(f=""+b+":"+f);k=this.l();n=[];b=0;for(g=k.length;b<g;b++)l=k[b],c=r.createElementNS(d[0].namespaceURI,f),c=e(c).text(l),d.append(c),n.push(c[0].namespaceURI=d[0].namespaceURI);return n}return a.a.s.call(this)};a.prototype.d=function(){var c;if(null!=this.o&&null!=this.e){this.U();
var b,d,f,g;f=this.j().children();g=[];b=0;for(d=f.length;b<d;b++)c=f[b],g.push(e(c).text());c=g;this.O||(c=c[0]);return this.f().J(c)}return a.a.d.call(this)};a.prototype.l=function(){var a;a=this.f().J();null==this.o||a instanceof Array||(a=null!=a&&""!==a?[a]:[]);return a};a.prototype.m=function(){var a,b,d,f,g,k;a=e('<select id="'+this.id+'-element" class="echoforms-element-select" autocomplete="off"/>');this.O?(a.L("echoforms-element-select-multiple"),a.b("multiple","multiple")):a.append('<option value=""> -- Select a value -- </option>');
k=this.items;f=0;for(g=k.length;f<g;f++)d=k[f],b=d[0],d=d[1],a.append('<option value="'+d+'">'+b+"</option>");return a};return a}(p);G=function(b){function a(b,h,d,f){this.start=b.b("start");this.end=b.b("end");this.step=b.b("step");a.a.constructor.call(this,b,h,d,f)}g(a,b);a.i="range";return a}(t);I=function(b){function a(){return U=a.a.constructor.apply(this,arguments)}g(a,b);a.i="secret";a.prototype.C="password";return a}(t);p=function(b){function a(){return V=a.a.constructor.apply(this,arguments)}
g(a,b);a.i="textarea";a.prototype.m=function(){return e('<textarea id="'+this.id+'-element" class="echoforms-element-textarea" autocomplete="off"/>')};return a}(p);m=function(b){function a(b,h,d,f){b.na("required");a.a.constructor.call(this,b,h,d,f)}g(a,b);a.prototype.f=function(){return e()};a.prototype.d=function(){var b,h,d,f,e;a.a.d.call(this);f=this.controls;e=[];h=0;for(d=f.length;h<d;h++)b=f[h],e.push(b.d());return e};a.prototype.g=function(){var b,h,d,f,g,k,m,n,p,q,r,s,t;m=a.a.g.call(this);
d=this.j();h=this.n;f=e();this.controls=g=[];s=h.children();n=0;for(q=s.length;n<q;n++)if(h=s[n],"help"!==h.nodeName&&"constraints"!==h.nodeName){k=!1;t=this.B;p=0;for(r=t.length;p<r;p++)if(b=t[p],e(h).la(b.i)){b=new b(e(h),d,this.B,this.t);g.push(b);f=f.add(b.c);k=!0;break}k||u("No class available for element:",h)}m.find(".echoforms-elements").ta(e('<div class="echoforms-children"/>').append(f));return m};a.prototype.u=function(b){var h,d,f,e,g;a.a.u.call(this,b);e=this.controls;g=[];d=0;for(f=e.length;d<
f;d++)h=e[d],g.push(h.u(b));return g};return a}(m);E=function(b){function a(b,h,d,e){a.a.constructor.call(this,b,h,d,e);this.d()}g(a,b);a.prototype.j=function(){return this.r.children()};return a}(m);m=function(b){function a(){return W=a.a.constructor.apply(this,arguments)}g(a,b);a.i="group";a.prototype.N=function(){return null!=this.label?e('<h1 class="echoforms-control-label">'+this.label+"</h1>"):e()};a.prototype.M=function(){var a,b,d,f,g;b=e();g=this.n.children("help");d=0;for(f=g.length;d<f;d++)a=
g[d],b=b.add('<p class="echoforms-help">'+e(a).text()+"</>");return b};a.prototype.g=function(){var b;b=a.a.g.call(this);b.children(".echoforms-control-label").aa(b.children(".echoforms-help"));return b};return a}(m);J=function(b){function a(b,e,d,f){null==b.b("valueElementName")&&b.b("valueElementName","value");a.a.constructor.call(this,b,e,d,f)}g(a,b);a.i="selectref";a.prototype.g=function(){return a.a.g.call(this).L("echoforms-control-select")};return a}(A);P={controls:[]};O=[k,t,L,z,A,G,I,p,m,
J];N=function(){function b(a){this.I=x(this.I,this);var b,e,d,f,g;f={};d=/\sxmlns(?::(\w+))?=\"([^\"]+)\"/g;for(b=d.exec(a);null!=b;)e=null!=(g=b[1])?g:" default ",b=b[2],f[e]=b,b=d.exec(a);this.namespaces=f}b.prototype.I=function(a){return this.namespaces[null!=a?a:" default "]};return b}();D=function(){return function(b,a){var c,h,d,f;this.root=b;this.options=e.extend({},P,a);this.form=d=this.options.form;this.B=c=this.options.controls.concat(O);null==d&&q("You must specify a 'form' option when creating an echoforms instance");
this.t=f=(new N(d)).I;h=e(R(d));this.r=d=h.find("form > model > instance");this.n=h=h.find("form > ui");this.control=new E(h,d,c,f);this.root.append(this.control.element())}}();e.qa.echoforms=function(){var b,a,c;b=1<=arguments.length?s.call(arguments,0):[];if(0<b.length&&"string"===typeof b[0])return c=b,a=c[0],b=2<=c.length?s.call(c,1):[],c=this.map(function(){var c,d;if(d=e.data(this,"echoforms"))return/^debug_/.test(a)?(c=a.split("_"),c=2<=c.length?s.call(c,1):[],d[c.join("_")]):/^_/.test(a)||
"function"!==typeof(null!=d?d[a]:void 0)?(B("Could not call "+a+" on echoforms instance:",this),null):d[a].apply(d,b);u("ECHO Form not found on instance");return this}),c[0];if(2>b.length)return this.pa(function(){var a;a=b[0];if(!e.data(this,"echoforms"))return e.data(this,"echoforms",new D(e(this),a))});B("Bad arguments to echoforms:",b);return this};return e(r).sa(function(){})})(jQuery,window,document)}).call(this);
